# PySide6 图像处理工具箱

一个功能强大的图像处理桌面应用程序，基于PySide6和OpenCV构建，提供直观的用户界面和丰富的图像处理功能。

## 界面预览

以下GIF演示了应用程序的主要功能：

### 基本界面与操作
![基本界面](images/1.gif)

### 图像处理功能
![图像处理演示](images/2.gif)


## 功能特点

- **多种输入源支持**
  - 摄像头实时视频处理
  - 本地视频文件处理
  - 静态图片处理

- **丰富的图像处理功能**
  - 背景分离（KNN和MOG2算法）
  - 几何变换（尺寸调整）
  - 颜色空间转换（RGB、HSV、灰度等）
  - 形态学操作（开/闭运算、腐蚀、膨胀）
  - 边缘检测（Canny算法）
  - 轮廓检测与绘制
  - 图像滤波（高斯、中值、均值）
  - 二值化处理

- **交互式区域排除功能**
  - 直接在视频/图像上绘制排除区域
  - 保存和加载排除区域配置

- **完整的配置系统**
  - 通过UI界面动态调整处理参数
  - 配置文件的保存与加载
  - 实时预览处理效果

- **网络通信支持**
  - TCP服务器和客户端实现
  - 支持心跳机制和断线重连

## 技术栈

- **前端**: PySide6 (Qt for Python)
- **图像处理**: OpenCV (cv2)
- **其他库**: numpy, PIL, json

## 安装说明

### 环境要求

- Python 3.8+
- OpenCV 4.5+
- PySide6

### 安装步骤

1. 克隆仓库
   ```bash
   git clone https://github.com/yourusername/pyside6-image-processor.git
   cd pyside6-image-processor
   ```

2. 创建虚拟环境（推荐）
   ```bash
   python -m venv venv
   # Windows
   venv\Scripts\activate
   # Linux/macOS
   source venv/bin/activate
   ```

3. 安装依赖
   ```bash
   pip install -r requirements.txt
   ```

4. 运行应用
   ```bash
   python main.py
   ```

## 使用指南

### 主界面概述

应用程序界面由以下几个部分组成：
- **工具栏**: 顶部工具栏用于选择输入源、开始/停止处理等操作
- **左侧边栏**: 管理配置文件
- **右侧边栏**: 配置各种图像处理参数
- **主内容区**: 显示原始图像和处理后的图像

### 基本步骤

1. **选择输入源**:
   - 从工具栏选择"摄像头"、"视频文件"或"图片"
   - 对于摄像头，选择设备索引
   - 对于视频/图片，点击"选择视频"/"选择图片"按钮浏览文件

2. **配置处理参数**:
   - 在右侧边栏的"配置信息"标签页中调整各种图像处理参数
   - 启用/禁用各种处理步骤（如背景分离、边缘检测等）
   - 调整每个处理步骤的具体参数

3. **运行处理**:
   - 点击"开始"按钮开始图像处理
   - 实时查看处理结果

4. **保存配置**:
   - 点击"保存配置"按钮保存当前设置
   - 命名并存储配置，以便将来加载使用

5. **区域排除**:
   - 右键点击图像，选择"绘制排除区域"
   - 使用鼠标划定不需要处理的区域
   - 保存排除区域配置以便将来使用

## 项目结构

.
├── main.py                  # 程序入口和 